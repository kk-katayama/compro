# 期待値DP
・条件付き期待値

****2つのサイコロの目の和の期待値　→ 7
条件付き期待値を用いると...
1つ目のサイコロを振るとkが出たとする。このときの2つのサイコロの目の和の期待値は？
和のパターンは k+1, k+2, k+3, k+4, k+5, k+6 の6通り。発生する確率はどれも1/6なので 
(求めたい期待値) = sum_i=1^6 1/6*(k+i) = k+7/2 ←条件付き期待値

kも動かしてやると sum_k=1^6 (k+7/2)*1/6 = 7  となる。

(期待値) = sum (条件付き期待値) * (それぞれの条件を満たす確率)
※(それぞれの条件を満たす確率) の総和は1である。

・どんなとき使えるか

・コイントス
*表裏がそれぞれ1/2の確率で出る1枚のコインを投げる。初めて表が出るまでに投げる回数の期待値は？

求めたい期待値 → 1枚も投げていな状態で初めて表が出るまでに投げる回数の期待値

少し条件をつける...
1枚目を投げて表がでたとき → 期待値は1
1枚目を投げて裏がでたとき → 期待値は1+(1枚も投げていない状態で初めて表が出るまでに投げる回数の期待値)
それぞれ起こる確率は1/2

条件付き期待値の方法より、E=1/2+1/2*(1+E) → E=2

・コイントス2
*3連続で表が出るまでに投げる回数の期待値は？

求めたい期待値 → 一枚も投げていない状態で3連続で表が出るまでに投げる回数の期待値

状態として今何枚連続で表が出たか？を持っておく E(i) := i枚連続で表が出た状態から投げる回数の期待値

E(0)からスタート

E(0) = 1/2 * ( 1 + E(0) ) + 1/2 * ( 1 + E(1) ) ; (1 + E(1) ) は0枚連続で表が出ている状態から1枚目が表が出た場合の投げる回数の期待値
E(1) = 1/2 * ( 1 + E(0) ) + 1/2 * ( 1 + E(2) ) ;
E(2) = 1/2 * 1 + 1/2 * ( 1 + E(0) ) ;

E(0) = 14
 
http://math314.hateblo.jp/entry/2013/12/12/232045 より


